# CreditAPI
## Описание проекта

Этот проект представляет собой API-сервис для создания и изменения графика платежей по кредиту. Сервис разработан с использованием Django и Django REST Framework, а база данных SQLite используется для хранения данных. Вы также можете использовать Redis для хранения кэша, если необходимо.

## Установка

Для запуска этого проекта вам понадобятся Docker и Docker Compose. Установите их, следуя официальным инструкциям для вашей операционной системы.

1. Склонируйте репозиторий проекта:

   ```bash
   git clone https://github.com/your/repo.git
   cd repo
   ```

2. Создайте файл `requirements.txt` в корневой директории проекта со следующим содержимым:

   ```
   Django==3.2.7
   djangorestframework==3.12.4
   ```

   Укажите все необходимые зависимости, такие как Django и Django REST Framework, с версиями, которые вы планируете использовать.

3. Создайте файл `docker-compose.yml` в корневой директории проекта со следующим содержимым:

   ```yaml
   version: "3"
   services:
     app:
       build:
         context: .
       ports:
         - "8000:8000"
       depends_on:
         - db
         - redis
     db:
       image: python:3.9
     redis:
       image: redis:latest
   ```

   В этом файле определены два сервиса: `app` (ваше Django-приложение) и `db` (база данных SQLite). Вы также можете добавить сервис Redis, если решите использовать его для кэширования.

4. Запустите Docker Compose для сборки и запуска контейнеров:

   ```bash
   docker-compose up
   ```

   Docker-контейнеры будут созданы и запущены. Вы увидите вывод, включая информацию о запуске вашего Django-приложения.

5. Ваш API-сервис будет доступен по адресу `http://localhost:8000`. Вы можете отправлять запросы к вашим эндпоинтам и использовать API, как обычно.

## Использование

Вы можете использовать любой инструмент для отправки HTTP-запросов (например, curl или Postman) для взаимодействия с API-сервисом. Ниже приведены примеры использования нескольких эндпоинтов:

1. Создание графика платежей:
   - URL: `http://localhost:8000/api/payment-schedule/`
   - Метод: POST
   - Тело запроса (JSON):
     ```json
     {
       "amount": 1000,
       "loan_start_date": "2024-10-01",
       "number_of_payments": 4,
       "periodicity": "1m",
       "interest_rate": 0.1
     }
     ```

2. Изменение суммы тела платежа:
   - URL: `http://localhost:8000/api/reduce-principal/{credit_id}/{payment_id}/`
   - Метод: PATCH
   - Тело запроса (JSON):
     ```json
     {
       "amount": 50
     }
     ```
   Замените `{credit_id}` и `{payment_id}` на соответствующие идентификаторы кредита и платежа.

## Тестирование

Для запуска тестов Django введите следующую команду в командной строке:

```bash
docker-compose run --rm app python manage.py test
```

Это запустит тесты и выведет результаты в командной строке.

## Заключение

Теперь у вас есть готовый API-сервис для создания и изменения графика платежей по кредиту. Вы можете использовать его для управления платежами и проведения расчетов. Свободно настраивайте и расширяйте функциональность API в соответствии с вашими потребностями.
